@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Gestion des nomenclatures</h1>
    <p>Projet d'apprentissage C# et POO</p>
</div>

<div>
    <form method="get" asp-action="">
        <label></label>
        <input type="text" name="expression">
        <button id="searchProduct">Rechercher les produits</button>
    </form>
</div>

<table class="table">
        <thead>
            <tr>
                <td>Nom</td>
                <td>Type</td>
                <td>Actions</td>
            </tr>
        </thead>
        <tbody id="tableau">
        
        </tbody>
    </table>


@section Scripts
{
    <script>
        var produits = null;

        $('#searchProduct').click(function() {
        var expression = $('input[name=expression]').val()

            $.get( "/api/search/" + expression, function(res) {
                alert(res);
                produits = res
                 foreach (let prod in produits)
                    {
                        foreach (let p in prod)
                        {
                           alert(p)
                        }
                       
                    }
                @* $("#tableau").append(
                    foreach (let prod in produits)
                    {
                        foreach (let p in prod)
                        {
                           "<tr>" +
                                "<td><a asp-action=`Edit` asp-route-id=`p.Id`>p.Nom</a></td>"+
                                "<td>p.</td>"+
                                "<td><a asp-action=`Delete` asp-route-id=`p.Id` class=`btn btn-primary`>Supprimer</a></td>"+
                            "</tr>"
                        }
                       
                    }
                ) *@
            })

            return false;
        });

    </script>

}

